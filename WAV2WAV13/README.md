# WAV2WAV13
wavファイルを読み込んで、FlMMLで再生できるMMLを出力するツールです。

もともと自分がいろいろなデータから技術を盗んで、プログラミングの勉強もかねて自作ツールを作成し使っていたのですが、一から作り直しついでに公開することにしました。

## 動作確認ブラウザ
* Chrome
* Firefox
* Edge

## 使い方

## サンプリングレート変換

#### WAVファイル
RIFF WAV形式のファイルを選択します。ステレオデータはモノラルデータに変換します。

#### テンポ(BPM)
テンポを入力します。テンポが速いほど高音質&文字数大です。

#### バンク再生時間(tick)
WAV13一定義を、何tickで鳴らすかです。小さいほど高音質&文字数大です。

#### 最大サンプル数
WAV13の最大サンプル数1024のうち何サンプル使うか入力します。  
1024のままで問題ないと思います。

#### ノーマライズ
入力波形をノーマライズします。

#### サンプリングレート変換 & MML出力
サンプリングレートを変換し、MMLを出力します。

## MML出力
ここから先の項目は、変更が即座にMMLに反映されます。  
テンポやtickカウントを変更した場合は、もう一度サンプリングレート変換が必要です。

#### WAV13開始番号
WAV13定義の番号を入力します。WAV13定義が複数にわたる場合、この番号からの連番となります。

#### マクロの名前のベース
後述する出力マクロの名前のベースを入力します。  
「SD」としたとき、「$SD8」「$SD16」のようなマクロが出力されます。

#### 出力マクロを選ぶ
PCMを任意の長さ分だけ鳴らすためのマクロを選びます。  
例えば「1/16」にチェックが入っていれば、PCMを16分音符の長さだけ鳴らす「$SD16」といったようなマクロが出力されます。  
ただし、「無駄なマクロを出力しない」にチェックが入っていて、かつ16分音符でPCMが収まった場合それ以上の長さのマクロは出力しません。  

## その他
入力値のチェックは一切行っていません。変な値を入力するとおかしな挙動になるかもしれません。
WAV13の最大定義数を超えても構わず処理します。  
FlMMLの最低音程がo0cなので、再生できるPCMのサンプリングレートには下限がありますが、構わず処理します(上限もおそらく同じ)。  

データによってはノイズが目立ってしまうようです。ご容赦ください。  

このツールはApache 2.0 Licenseで配布されている成果物を使用しています。  
[bessel](https://github.com/SheetJS/bessel)  
[Apache 2.0 License](http://www.apache.org/licenses/LICENSE-2.0)